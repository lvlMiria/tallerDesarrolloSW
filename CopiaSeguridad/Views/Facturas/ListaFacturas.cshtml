@model IEnumerable<Presentacion.Models.Factura>


@{
    ViewData["Title"] = "Lista de Facturas";
}

<div class="row mb-3">
    <div class="col-8">
        <div class="row p-2">
            @*Combos*@
            <div class="col">
                <label for="cboAnio" class="form-label" style="font-weight:bold">Año</label>
                <div class="input-group mb-3">
                    <select class="form-select" aria-label="cboAnio">
                        <option selected>Seleccionar año</option>
                        @{
                            List<Int16?> repeticionAnio = new List<Int16?>();
                        }
                        @foreach (var factura in Model){
                            var repetido = false;
                            foreach (Int16? anio in repeticionAnio)
                            {
                                if (factura.AnioContable == anio)
                                {
                                    repetido = true;
                                }
                            }
                            if(repetido == false)
                            {
                                <option value="@factura.AnioContable">@factura.AnioContable</option>
                                repeticionAnio.Add(factura.AnioContable);
                            }
                        }
                    </select>
                </div>
            </div>
            <div class="col">
                <label for="cboMes" class="form-label" style="font-weight:bold">Mes</label>
                <div class="input-group mb-3">
                    <select class="form-select" aria-label="cboMes">
                        <option selected>Seleccionar mes</option>
                        @{
                            List<byte?> repeticionMes = new List<byte?>();
                        }
                        @foreach (var factura in Model)
                        {
                            var repetido = false;
                            foreach (byte mes in repeticionMes)
                            {
                                if (factura.MesContable == mes)
                                {
                                    repetido = true;
                                }
                            }
                            if (repetido == false)
                            {
                                <option value="@factura.MesContable">@factura.MesContable</option>
                                repeticionMes.Add(factura.MesContable);
                            }
                        }
                    </select>
                </div>
            </div>
            <div class="col">
                <label for="cboConcepto" class="form-label" style="font-weight:bold">Concepto</label>
                <div class="input-group mb-3">
                    <select class="form-select" aria-label="cboConcepto">
                        <option selected>Seleccionar concepto</option>
                        @foreach (var concepto in ViewBag.Conceptos)
                        {
                            <option value="@concepto.CodConcepto">@concepto.DescConcepto</option>
                        }
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="col-4">
        @*Botones*@
        <div class="row ms-auto p-2">
            <div class="col">
                <div class="m-2">
                    <div class="d-grid gap-2">
                        <button type="button" style=" background-color: forestgreen; color: white;" class="btn">Exportar</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="m-2">
                    <a asp-action="Index">
                        <div class="d-grid gap-2">
                            <button type="button" style=" background-color: forestgreen; color: white;" class="btn">Volver</button>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container m-2" style="background-color:white">
    <div class="tabla-scroll">
        <table class="table table-striped table-hover" style="overflow-x:scroll">
            <thead>
                <tr>
                    <th scope="col">Item</th>
                    <th scope="col">@Html.DisplayNameFor(model => model.NumFactura)</th>
                    <th scope="col">Concepto</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">@Html.DisplayNameFor(model => model.Empresa)</th>
                    <th scope="col">Origen</th>
                    <th scope="col">@Html.DisplayNameFor(model => model.Monto)</th>
                    <th scope="col">Monto USD</th>
                    <th scope="col">Fecha Recepción</th>
                    <th scope="col">Fecha Entrega</th>
                    <th scope="col">@Html.DisplayNameFor(model => model.MesContable)</th>
                    <th scope="col">@Html.DisplayNameFor(model => model.AnioContable)</th>
                    <th scope="col">Comentarios</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model){
                <tr>
                    <td>Impresoras</td>
                    <td>@Html.DisplayFor(modelItem => item.NumFactura)</td>
                    <td>Concepto</td>
                    <td>Continuidad Operativa</td>
                    <td>@Html.DisplayFor(modelItem => item.Empresa)</td>
                    <td>Contrato</td>
                    <td>@Html.DisplayFor(modelItem => item.Monto)</td>
                    <td>500</td>
                    <td>31/01/2024</td>
                    <td>02/02/2024</td>
                    <td>@Html.DisplayFor(modelItem => item.MesContable)</td>
                    <td>@Html.DisplayFor(modelItem => item.AnioContable)</td>
                    <td></td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>